<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>
    Cátalogo
  </title>
  <!-- Fonts and icons -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <!-- Nucleo Icons -->
  <link href="../css/nucleo-icons.css" rel="stylesheet" />
  <link href="../css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <link href="../css/nucleo-svg.css" rel="stylesheet" />
  <!-- CSS Files -->
  <link id="pagestyle" href="../css/soft-ui-dashboard.css?v=1.0.3" rel="stylesheet" />

  <style>
    .imgCard{
      max-width: 100%;
      max-height: 100%;

      border-radius: 10px;
    }
    .imgUser{
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background-color: gray;
    }
    #backCatalog{
      border-bottom: solid 1px transparent;
      transition: 0.5s;
    }
    #backCatalog:hover{
      border-bottom: solid 1px lightgray;
    }
    .fichaImages{
      width: 300px;
      height: 400px;
    }
    .removeImgButton{
      width: 30px;
      height: 30px;
      border-radius: 50%;
      cursor: pointer;
      position: absolute;
      top: -3%;
      right: -2%;
      padding: 5px;
      background-color: white;
      border: solid 1px lightgray;
      transition: 0.3s;
    }
    .removeImgButton:hover{
      top: -15px;
    }
    .imgIndicator{
      position: absolute;
      top: 2%;
      left: 2%;
    }
    #fichaImages{
      position: relative;
    }
    #addImage{
      width: 60px;
      height: 60px;
      border-radius: 50%;
      box-shadow: 0 20px 27px 0 rgb(0 0 0 / 5%);
      cursor: pointer;
      transform: translate(-50%, 0);
      position: absolute;
      top: 50%;
      right: 0%;
      color: white;
      cursor: pointer;
    }




  </style>
</head>

<body class="g-sidenav-show bg-gray-100">

  <!-- Menu -->
  <%- include('./partials/menu.ejs') %>

  <main class="main-content max-height-vh-100 h-100">

    <!-- Navbar -->
    <%- include('./partials/head.ejs') %>

    <!-- Cotent -->
    <div class="p-4 m-4">
      
      <!-- Paginador -->
      <div class="nav-wrapper position-relative end-0">
        <ul class="nav nav-pills nav-fill p-1" role="tablist">
           <li class="nav-item" onclick='$(".fichaPage").hide(); $("#fichaEncabezado").show()'>
              <a class="nav-link mb-0 px-0 py-1 active" data-bs-toggle="tab" href="#profile-tabs-simple" role="tab" aria-controls="profile" aria-selected="true">
              Encabezado ficha
              </a>
           </li>
           <li class="nav-item" onclick='$(".fichaPage").hide(); $("#fichaImages").show()'>
              <a class="nav-link mb-0 px-0 py-1" data-bs-toggle="tab" href="#dashboard-tabs-simple" role="tab" aria-controls="dashboard" aria-selected="false">
              Imágenes Ficha
              </a>
           </li>
           <li class="nav-item">
              <a class="nav-link mb-0 px-0 py-1" data-bs-toggle="tab" href="#dashboard-tabs-simple" role="tab" aria-controls="dashboard" aria-selected="false">
              Detalle Ficha
              </a>
            </li> 
            <li class="nav-item">
              <a class="nav-link mb-0 px-0 py-1" data-bs-toggle="tab" href="#dashboard-tabs-simple" role="tab" aria-controls="dashboard" aria-selected="false">
              Blancos Biologicos
              </a>
            </li> 
         </ul>
      </div>

      <div class="card ">

        <!-- Ficha Encabezado -->
        <div id="fichaEncabezado" class="fichaPage" > 
          <div class="d-flex w-100 p-3">
            <div class="w-40">
              <div class="text-center ">
                <label for="fichaName">Nombre Ficha</label>
                <input type="text" id="fichaName" class="form-control">
              </div>
              <div class="text-center mt-2">
                <label for="fichaTitle">Titulo Ficha</label>
                <input type="text" id="fichaTitle" class="form-control">
              </div>
              <div class="text-center mt-2">
                <label for="fichaGenericName">Nombre Génerico</label>
                <input type="text" id="fichaGenericName" class="form-control">
              </div>
              <div class="form-check form-switch ps-0 text-center mt-2">
                <label for="">Estado</label>
                <div class="d-flex justify-content-center align-items-center gap-2">
                  <div> 
                    <h6  class="m-0 text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Inactivo</h6>
                  </div>
                  <div>
                    <input class="form-check-input m-0" type="checkbox" id="flexSwitchCheckDefault" checked="" >
                  </div>
                  <div>
                    <h6 class="m-0 text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Activo</h6>
                  </div>
                </div>
              </div>
            </div>
            <div class="w-60 text-center">
              <div style="height: 350px" >
                <img src="http://104.236.159.193:3010/media/catalogo/imagen_catalogol2YT4jf.png" alt="" class="imgCard border">
              </div>
              <div style="color: red; font-size: 15px; cursor: pointer;" class="d-flex justify-content-center align-items-center gap-2">
                <i class="fa fa-trash" ></i>
                <p class="m-0">Eliminar Foto</p>
              </div>
            </div>
          </div>
       
        </div>

        <div id="fichaImages" class="fichaPage"  style="display: none;">
          <div class="imgIndicator">
            <h6 class="font-size xs"><span>1</span>/5  Imagenes</h6>
          </div>

          <div id="imgContainer" class="d-flex gap-3 alig-items-center justify-content-center p-5 " >
            <div class="fichaImages d-flex flex-column align-items-center text-center pb-3" style="position: relative;">
              <img class="imgCard" src="http://104.236.159.193:3010/media/catalogo/imagen_catalogol2YT4jf.png" alt="">
              <h6 class="font-weight-bold"></h6>
              <div class="removeImgButton" style="display: none;">
                <div class="d-flex justify-content-center alig-items-center removeImgButton"><i class="fas fa-times"></i></div>
              </div>
            </div>
            <div class="fichaImages d-flex flex-column align-items-center text-center pb-3" style="position: relative;">
              <img class="imgCard" src="http://104.236.159.193:3010/media/catalogo/imagen_catalogol2YT4jf.png" alt="">
              <h6 class="font-weight-bold"></h6>
              <div class="removeImgButton" style="display: none;">
                <div class="d-flex justify-content-center alig-items-center removeImgButton"><i class="fas fa-times"></i></div>
              </div>
            </div>
            <div class="fichaImages d-flex flex-column align-items-center text-center pb-3" style="position: relative;">
              <img class="imgCard" src="http://104.236.159.193:3010/media/catalogo/imagen_catalogol2YT4jf.png" alt="">
              <h6 class="font-weight-bold"></h6>
              <div class="removeImgButton" style="display: none;">
                <div class="d-flex justify-content-center alig-items-center removeImgButton"><i class="fas fa-times"></i></div>
              </div>
            </div>
          </div>

          <div id="addImage" class=" bg-primary" style="display: none;">
            <div class="d-flex justify-content-center align-items-center h-100">
              <i class="fas fa-plus"></i>
            </div>
          </div>

          <div id="inputsContainer" style="position: fixed; top: -200%;">
            
          </div>
          
        </div>

        <hr class="horizontal dark mt-0">
        <div class="d-flex justify-content-between align-items-center mb-2 mx-4">
          <div id="backCatalog" style="cursor: pointer;" class="d-flex justify-contet-center align-items-center gap-2">
            <i class="fas fa-chevron-left"></i>
            <h6 class="text-s m-0" >Volver al catalogo</h6>
          </div>
          <div class="d-flex justify-content-center gap-3">
            <div class="imgUser"></div>
            <div class="text-center">
              <h6 class="m-0 text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Diseñado Actualizado Por:</h6>
              <h6 class="m-0">Juan Sims</h6>
              <div class="d-flex justify-content-center align-items-center gap-1 m-0 text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">
                <i class="fa fa-calendar " ></i>
                <span>11/12/2022</span>
              </div>
            </div>
          </div>
          <div>
            <button class="btn btn-outline-primary" id="saveButton" style="display: none;">
              <i class="far fa-save me-2"></i>
              Guardar
            </button>
            <button class="btn btn-primary" id="editButton">
              <i class="fas fa-edit me-2"></i>
              Editar
            </button>
          </div>
        </div> 

      </div>
    </div>
      
  </main>

  <!--   Core JS Files   -->
  <script src="../js/core/popper.min.js"></script>
  <script src="../js/core/bootstrap.min.js"></script>
  <script src="../js/plugins/perfect-scrollbar.min.js"></script>
  <script src="../js/plugins/smooth-scrollbar.min.js"></script>
  <script src="../js/plugins/choices.min.js"></script>
  <!-- Kanban scripts -->
  <script src="../js/plugins/dragula/dragula.min.js"></script>
  <script src="../js/plugins/jkanban/jkanban.js"></script>
  <!-- Jquery -->
  <script src="../js/jquery.js"></script>
  <script src="../js/jquery-ui.min.js"></script>
  <!-- Underscore -->
  <script src="../js/underscore-min.js"></script>
  <!-- Script Plantilla -->
  <script src="../js/soft-ui-dashboard.min.js?v=1.0.3"></script>
  <!-- Dropzone -->
  <script src="../public/js/dropzone.min.js"></script>
  <link rel="stylesheet" href="../public/css/dropzone.min.css">

  <script>
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
      return new bootstrap.Tooltip(tooltipTriggerEl)
    })

    $("#editButton").on("click", function () {
      $(this).hide();
      $(".removeImgButton").show();
      $("#addImage").show()
      $("#saveButton").show();
      $("#imgContainer").attr("style", "margin-right: 70px")
    });

    $("#saveButton").on("click", function () {
      $(this).hide();
      $(".removeImgButton").hide();
      $("#addImage").hide()
      $("#editButton").show();
      $("#imgContainer").attr("style", "margin-right: 0px")
    });

    $(document).on("click", ".removeImgButton", function () {
      // Get atributte to send data to delete
      let imgContainer = $(this).closest(".fichaImages");
      console.log(imgContainer)
      $(imgContainer).remove();
    })

    $("#addImage").on("click", function () {
      let imagesAmount = $("#imgContainer").find(".fichaImages").length
      if (imagesAmount == 5) { alert("No es posible agregar más imagenes, elimine alguna antes de intentar insertar otra"); return}

      let element = `
        <div class="inputField">
        <input type="file" name="" id="imgInput${imagesAmount + 1}">
        </div>
      `;

      $("#inputsContainer").append(element);

      let inputFile = $("#inputsContainer input").last();

      $(inputFile).change(function () {
        let file = $(this).prop('files')[0];
        if (file) {
          let url = URL.createObjectURL(file);
          let element = `
            <div class="fichaImages d-flex flex-column align-items-center text-center pb-3" style="position: relative;">
              <img class="imgCard" src="${url}" alt="">
              <h6 class="font-weight-bold"></h6>
              <div class="removeImgButton" >
                <div class="d-flex justify-content-center alig-items-center removeImgButton"><i class="fas fa-times"></i></div>
              </div>
            </div>
          `;
          $("#imgContainer").append(element);
        }
      });

      inputFile.trigger('click');
    });


  </script>

</body>
</html>